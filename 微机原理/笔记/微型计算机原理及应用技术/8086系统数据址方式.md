# 8086系统数据寻址方式
寻址:求得操作数所在地或所在存储器单元地址的方式
求得的操作数有如下两种用途:
1. 当作数据使用
2. 用作转移地址使用

>注意:在本章节只介绍当作数据使用,下一章节介绍转移1地址使用

寻址的操作数只能有以下四种:
1. 立即数
2. 通用寄存器
3. 段地址寄存器
4. 存储单元
## 立即寻址
MOV AX,080AH   
将080H放到AX中
后面的080AH是**立即数**，所以叫立即寻址
注意事项:
1. 立即数只能是源操作数
## 寄存器寻址
MOV AX,BX
把BX数给AX
注意事项:
1. 类型要一致
    >MOV AL,BX 错误
2. 类型要明确
    >MOV [2000H], 56H 错误 
MOV WORD PTR [2000H], 56H 正确
3. 二者**不能都是段地址寄存器**
4. CS和IP不能做目的操作数,但是可以做源操作数
5. DS,ES,SS做目的操作数,源操作数不能为立即数
## 存储器寻址
要找的操作数放在存储器单元中,存放操作数单元的EA由以下5种方式寻址:
### 直接寻址
操作数所在单元EA在指令中直接给出

MOV AX,[22A0H]
操作数的有效地址称为EA，也可理解为偏移量，在这里EA就是22A0H
这里EA是偏移地址，那么需要换算成实际地址(DS*16+22A0H)才能存入，默认段地址是DS
>若是想强制改到别的代码段，可以参考前文的超越前缀

注意事项:
1. 存储单元可与通用寄存器互传,但是存储单元间**不能直接操作**(MOV,ADD,AND均不可)
    > MOV [2000H], [2002H] 错误
    > DAT1 DB 12H
    > DAT2 DB 56H
    > MOV DAT1, DAT2 错误
### 寄存器间接寻址
EA是有且仅由**地址寄存器**提供的 **(BX,SI,DI)**
**特别注意:以上三个寄存器默认段地址都是DS**
MOV AX,[SI]
把SI对应地址内的数给AX，注意这里也算偏移地址，要换算成实际地址
> MOV BX,OFFSET DAT1
> MOV AL,[BX]
> MOV [BX], 56H 错误,类型不明确,因为[BX]表示一个存储器单元,没有类型,56H是一个立即数,也没有类型

>注意:在本册教材中,BP也算在间接寻址当中,即EA可以由BX,BP,SI,DI提供,但是西安电子课件大学视频中却强调BP不归属间接寻址当中
### 寄存器相对寻址
EA = BX/BP/SI/DI + 8位/16位偏移量(COUNT)
>以下二者完全一致,区别就是基址寻址用BX/BP,变址寻址用SI/DI

**再强调一遍:**
BX,SI,DI默认DS
BP默认SS

MOV [BX]+3, AL
实际上完全等同于
1. [BX + 3]
2. 3 + [BX]
3. 3[BX]

若是CONT不写,如[BX],那么默认是0
#### 基址寻址
EA = BX/BP + 8位/16位偏移量(COUNT)

MOV AX,COUNT[BP]
实际地址=SS*16+COUNT+BP
**BP默认段地址是SS**
#### 变地址寻址
EA = SI/DI + 8位/16位偏移量(COUNT)

MOV AX,COUNT[SI]
实际地址=DS*16+COUNT+SI

#### 变量作为COUNT
在上述例子中COUNT是一个常数3,但是这个COUNT可以是一个变量
MOV BX,0
MOV AL,OOH
MOV DAT1[BX],AL
那么他的实际地址应该表示为:
DS:OFFSET DAT1 + BX
>这里代码段是DS,是因为DAT1存放在DS段中,与变量存放位置有关

段地址确认,变量的优先限权高于寄存器,即**用变量来确认**
#### 例题
PUSH AX
PUSH BX
PUSH CX
要求在不破坏SP前提下,取出AX放入DX
MOV BP,SP
MOV DX,[BP]+4

### 基址变址寻址
EA = BX/BP  + SI/DI
段地址的确认,由**基址寄存器来确认**

MOV [BX][SI],AL等同于[BX + SI]
### 基址变址且相对寻址
EA = BX/BP  + SI/DI + 8位/16位偏移量
注意:偏移量要是变量,段地址由变量的段地址来确定,否则就由基址寄存器的段地址来确定

MOV DAT1[BX][SI],AL等同于[BX + SI + OFFSET DAT1]
## 字符串寻址
MOVSB

## I/O端口寻址
IN AL,20H
把外设地址为20H的内容读入AL
OUT DX,AL
将AL内容输出给以DX的内容为地址外设中
> 注意，这里都不需要打括号

## 隐含寻址
AAA

PUSH AX 隐藏了目的操作数
>实际上MOVSB,MOVSW这种字符串寻址也是隐含寻址,且源和目的操作数都是隐含指令,但是本书分开来写

## 注意事项精简版
1. **只有**BX,BP,SI,DI这四个寄存器可以出现在括号内
2. BX,BP不允许出现在同一个括号内
3. SI,DI不允许出现在同一个括号内
4. 源操作数的要求如上所示，**目的操作数均用寄存器表示**
5. CS段寄存器与立即数不能作为目的操作数
6. 立即数送给内存时要与内存变量保存一致
7. 源操作数与目的操作数不能同时为存储器操作数，也不能同时为段地址寄存器
8. 立即数不能直接给段地址寄存器
9. IP寄存器不能作为源或目的操作数
10. MOV指令不改变标志位
11. 变量不能在指令中运算,如MOV AL,DAT1 + DAT2错误