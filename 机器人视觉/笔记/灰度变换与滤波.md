# 灰度变换与滤波
## 灰度变换
灰度变换不改变图像中像素位置，只改变其灰度值，且逐点进行，与周围像素无关
$$
g(x,y)=T[f(x,y)]
$$
即输入为f的图像，经过T变换关系，输出为g图像
### 灰度线性变换
$$
g(x,y)=af(x,y)+b
$$
b则是表示进行点加运算，a为倍乘运算，其关系如下
$$
b=0,且
\left\{  
             \begin{array}{lr}  
            a>1 \quad对比度拉伸 &  \\  
            a<1 \quad对比度压缩 & \\
            a=1 \quad复制 
             \end{array}  
\right.  
$$
主要作用是将聚集在较窄区间的灰度值拉伸至整个区间
### 灰度分段线性变换
分段顾名思义，就是根据每一段灰度值不同，进行不同的线性灰度处理。相当于每一段都有上述不同的a,b值进行线性变换。故常用于突出目标区域，不增强非目标区域，达到特定显示效果
### 对数变换
对数变换用于压缩动态范围，即压缩图像高灰度值部分，扩张低灰度值部分，增大暗部细节，压缩亮处细节
$$
s=c\ln(1+r)
$$
c为整数，r为浮点数
### 反转变换
就是将灰度值反过来，取补
$$
s=L-1-r\quad L-1为最大灰度值
$$
### 幂次变换
$$
s=cr^\gamma\quad
\left\{  
             \begin{array}{lr}  
            \gamma>1 \quad 放大亮处，缩小暗处 &  \\  
            \gamma<1 \quad 放大暗处，压缩亮处 (类似对数变换)& \\
            \gamma=1 \quad 线性变换 
             \end{array}  
\right.  
$$
## 直方图变换
直方图的分布情况可以大致看出图像情况，如偏暗图像其直方图组成成分多在较小一侧，偏亮图像其直方图组成成分躲在较大一侧，若是能够将其均匀分布，则图像质量会有所改善
### 直方图均衡化
正如上述所说，直方图要是均匀分布的，那么其色调比较协调。即可将对比度较低、灰度分布集中在较窄区间的图像，拾起灰度分布趋向均匀
### 直方图规定化
在均匀化时，我们只是把直方图简简单单的给拉开、分布均匀而已，但有些时候，如果只是这样简单拉开，效果不好。我们可以规定一个函数，让直方图按照这个函数的规律进行拉开，这叫直方图的规定化
## 分量与噪声
* 图像中**高频分量**指的是图像强度(灰度\亮度)变化**剧烈**部分，即图像**边缘**
* 图像中**低频分量**指的是图像强度(灰度\亮度)变化**平缓**部分，即**大片同色区域**

所以，低频分量是对整幅图像的强度进行综合考量，而高频分量是对图像边缘和轮廓的度量，噪声一般是**高频分量**
## 空间滤波
空间滤波指的是在没有进行图像变换(傅里叶变换)时进行的滤波处理
* **均值滤波**
想要对某一像素滤波，即对周围所有像素灰度值(如取3*3)全部加起来再取平均值，就是你滤波后该像素灰度值，相当于是**低通滤波**，有图像模糊化趋势，可去除高斯噪声，对椒盐噪声束手无策，也会造成边界模糊
* **中值滤波**
即对周围像素按照顺序排列起来，取这些数的中位数作为该像素滤波后的灰度值，可较好处理椒盐噪声，但造成图像不连续。因其是非线性滤波，可对边界有很好保留
* **高斯滤波**
在均值滤波中我们求的是平均值，相当于每个像素点的权重是一样的。在高斯滤波中，靠近中心点的像素灰度值权重增大，远离中心像素点灰度值的权重减小。根据这种权重关系求出来的新的灰度值叫高斯滤波
这种滤波器对高斯噪声去除效果非常好，但面对椒盐噪声时反而会模糊图像
## 频率滤波
频率滤波是在经过傅里叶变换后在频域实现的，主要步骤如下:
1. 从原始图像$f(x,y)$，经傅里叶变换变为$F(u,v)$
2. 将频原点移动到中心点去
3. 设计一个**滤波函数$H(u,v)$**，与$F(u,v)$相乘，即
   $$G(u,v)=H(u,v)F(u,v)$$
4. $G(u,v)$零频点移回左上角
5. 进行傅里叶反变换，$G(u,v)$变为$g(x,y)$
6. 取$g(x,y)$实部即为滤波后图像

因此我们可以看出，重要部分是在$H(u,v)$身上，以均是根据此来展开的
### 低通滤波
低通滤波即低频部分过去，高频部分过不去，以此削弱图像中高频部分
* **理想低通滤波器**
  理想就理想在低于截止频率$D_0$的部分全通过，高于$D_0$全过不去，因此他会造成图像的模糊，抑制图像变换。
  数学表达为:
  $$
  H(u,v)=
    \left\{  
             \begin{array}{lr}  
            1 \quad D(u,v) \leq D_0  \\  
            0 \quad D(u,v) > D_0  \\
             \end{array}  
    \right.  
  $$
  正因外他在边缘处$D_0$变换太剧烈，会出现振铃现象
* **巴特沃斯低通滤波器**
  $$
    H(u,v)=\frac{1}{1+[\frac{D(u,v)}{D_0}]^{2n}}
  $$
  很明显，在截止频率$D_0$并没有像理想低通滤波器那样有有很陡峭的边缘。事实上，正是如此，n称为巴特沃斯低通滤波器阶数，在n较小时没有振铃现象，而较大时反而出现
* **高斯低通滤波器**
  高斯低通滤波器是一种更为平滑的滤波器，他完全没有振铃现象
  $$
    H(u,v)=e^{-\frac{D^2(u,v)}{2D_0^2}}
  $$

实际上，对应低通滤波器来说，都有模糊图像抑制边缘的问题，对应这种问题在高通滤波器有较好的回答
### 高通滤波器
* **理想高通滤波器**
  $$
  H(u,v)=
    \left\{  
             \begin{array}{lr}  
            0 \quad D(u,v) \leq D_0  \\  
            1 \quad D(u,v) > D_0  \\
             \end{array}  
    \right.  
  $$
* **巴特沃斯高通滤波器**
  $$
    H(u,v)=\frac{1}{1+[\frac{D_0}{D_{u,v}}]^{2n}}
  $$
* **高斯高通滤波器**
  高斯低通滤波器是一种更为平滑的滤波器，他完全没有振铃现象
  $$
    H(u,v)=1-e^{-\frac{D^2(u,v)}{2D_0^2}}
  $$
## 同态滤波
同态滤波主要是解决在纱雾天气，光线不足时排出图片模糊的情况，经过同态滤波处理后，可以提高图像的清晰度
对于同态滤波来说，他们认为一幅图像$f(x,y)$可分为**照射分量$i(x,y)$与反射分量$r(x,y)$**，即
$$
f(x,y)=i(x,y)r(x,y)
$$
照射分量描述物体明暗，为低频，反射分量描述物体细节，为高频。
这种滤波主要步骤为:
1. 对$f(x,y)$取对数，然后做傅里叶变换
2. 对傅里叶变换后结果乘滤波器$H(u,v)$进行滤波
3. 对步骤2的结果取傅里叶反变换，然后再取反对数

这其中，滤波器$H(u,v)$是自己选定的，可以是前面讲的任意一种，只不过通常用高斯高通滤波器的变形来进行处理
## 带阻滤波
前面讲的滤波器都是分为两个部分的，处于一个部分的可以过去，处于不同部分的不让过去，而带组滤波这是分为了好几个部分，通常用于消除周期性噪声