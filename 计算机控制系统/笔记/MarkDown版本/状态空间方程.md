# 状态空间描述
状态空间方程是现代控制原理的内容，他相当于在古典控制理论的基础上引入了状态变量，同时又可以解决多输入多输出的问题

在连续系统中，状态空间描述如下所式:
$$
\dot{x}(t)=A_cx(t)+B_cu(t)\\
y(t)=C_cx(t)+D_cu(t)\\
$$
第一行，我们称为状态方程，第二行，我们称为输出方程，二者和在一起称为状态空间描述又称动态方程
$x(t)$称为状态变量，$u(t)$称为输入变量，$y(t)$称输出变量
![alt text](img/7_1.png)
自然的，在离散系统中微分变成差分，那么离散系统中状态空间描述如下:
$$
x(k+1)=Ax(k)+Bu(k)\\
y(t)=Cx(k)+Du(k)\\
$$
注意:为了简便器件，我们上述方程省略了了$T$，实际上$k+1\to(k+1)T$，以此类推
二者之间系数有如下的关系:
$$
A=e^{A_cT}\quad B=\int_0^Te^{A_cT}B_cdt\quad C=C_c\quad D=D_c
$$
对应离散系统，结构图如图所示:
![alt text](img/7_2.png)
## 求离散状态空间描述
* 方法一:给你连续系统空间描述，利用下方系数矩阵关系求解

$$
\left\{  
       \begin{array}{lr}  
         \dot{x}(t)=A_cx(t)+B_cu(t)\\
        y(t)=C_cx(t)+D_cu(t)\\   
             \end{array}      
\right.  
\Longrightarrow
\left\{  
       \begin{array}{lr}  
        x(k+1)=Ax(k)+Bu(k)\\
y(t)=Cx(k)+Du(k)\\  
             \end{array}      
\right. \\
A=e^{A_cT}\quad B=\int_0^Te^{A_cT}B_cdt\quad C=C_c\quad D=D_c
$$
* 方法二:给你差分方程，根据以下关系来求状态空间描述
![alt text](img/7_3.png)
![alt text](img/7_4.png)
若你的输入比较特殊，只有一个:
![alt text](img/7_7.png)
## 求解离散状态空间方程
此处我们默认给定系统是线性定常系统，即微分方程中各项系数都是与时间无关的常数，则称为定常系统，该类系统只要输入信号的形式不变，在不同时间输入下的输出响应形式是相同的

我们列出了状态空间方程的目的是要求出输出的脉冲序列，那么有:
* 方法一:令$k=0,1,2···$带入，我们可得以下规律，相当于得到一个数值解
![alt text](img/7_6.png)
那么根据此规律我可以求解出任意时刻的状态空间方程
* 方法二:利用z变换求解，实际上我们有如下规律
![alt text](img/7_5.png)
此时我们可以得到解析解

## 能控性与能观性
### 线性定常离散系统的能控性
能控性，本质是在有限时间内，控制作用能否使系统从初始状态转移到要求的状态，对于线性定常离散系统状态方程:
$$
x(k+1) = Ax(k)+Bu(k)
$$
如果存在控制向量序列$u(0),u(1),…,u(i-1)$，使系统从第0步的状态向量开始，在第i步到达零状态，即$x(i)=0$，那么就称此系统是能控的；如果对每一个k，系统的所有状态都是能控的，则称系统是状态完全能控的，简称能控

判断条件:
$$
rankW_c=rank
\left[
\begin{matrix}
    B&&AB&&\cdots&&A^{n-2}B&&A^{n-1}B
\end{matrix}
\right]=n\Leftrightarrow 能控
$$
### 线性定常离散系统的能观性
能观性，本质是在有限时间内，能够通过对系统输出的测定来估计系统的初始状态，对于线性定常离散系统状态空间描述为:
$$
x(k+1)=Ax(k)+Bu(k)\\
y(t)=Cx(k)+Du(k)\\
$$
在已知输入控制向量序列$u(0),u(1),…,u(n-1)$的情况下，如果能根据有限个采样号$y(0),y(1),…,y(n-1)$，确定出系统的初始状态$x_0$，则系统是状态完全能观测的，简称能观测

判断条件:
$$
rankW_0=rank
\left[
\begin{matrix}
    C&&CA&&\cdots&&CA^{n-2}&&CA^{n-1}
\end{matrix}
\right]^T=n\Leftrightarrow 能观
$$
### 性质
1. 对偶原理
系统$S_1=(A,B,C)$，系统$S_2=(A^T,B^T,C^T)$
![alt text](img/7_8.png)
$$
S_1能控\to S_2能观\\
S_1能观\to S_2能控
$$
2. 非奇异性线性变化不改变系统的能控性和能观性
![alt text](img/7_9.png)
3. 脉冲传递函数与能控性能观性关系
单输入单输出线性定常离散系统完全能控和完全能观的充分必要条件是脉冲传递函数不存在着零极点对消
如果存在着零极点对消，系统状态是不完全能控，或者是不完全能观，或者既不完全能控又不完全能观。
### 输出能观性
![alt text](img/7_10.png)
判断条件:
$$rank
\left[
\begin{matrix}
    D&&CB&&\cdots&&CA^{q-1}B
\end{matrix}
\right]=m\Leftrightarrow 能观
$$
注意:系统的状态能控性和输出能控性是两个不同的概念，二者之间没有什么必然的联系